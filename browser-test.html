<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Browser Test - Picture Perfect Consulting</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f5f5f5;
        }
        
        .test-dashboard {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        
        .feature-test {
            background: #f8f9fa;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
            border-left: 4px solid #ddd;
        }
        
        .feature-test.supported {
            border-left-color: #28a745;
            background: #d4edda;
        }
        
        .feature-test.unsupported {
            border-left-color: #dc3545;
            background: #f8d7da;
        }
        
        .browser-info {
            background: #e3f2fd;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .test-section {
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
        }
        
        .status-good { color: #28a745; font-weight: bold; }
        .status-warning { color: #ffc107; font-weight: bold; }
        .status-bad { color: #dc3545; font-weight: bold; }
        
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        
        button:hover {
            background: #0056b3;
        }
        
        .console-log {
            background: #1a1a1a;
            color: #00ff00;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            height: 200px;
            overflow-y: auto;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="test-dashboard">
        <h1>üåê Browser Compatibility Test Dashboard</h1>
        
        <div class="browser-info" id="browser-info">
            <h3>Browser Information</h3>
            <div id="browser-details">Loading...</div>
        </div>
        
        <div class="test-grid">
            <div class="test-section">
                <h3>üì± Mobile Menu Features</h3>
                <div id="menu-features">
                    <div class="feature-test" id="menu-elements">
                        <strong>Menu Elements:</strong> <span id="menu-elements-status">Testing...</span>
                    </div>
                    <div class="feature-test" id="css-support">
                        <strong>CSS Features:</strong> <span id="css-support-status">Testing...</span>
                    </div>
                    <div class="feature-test" id="js-support">
                        <strong>JavaScript Events:</strong> <span id="js-support-status">Testing...</span>
                    </div>
                </div>
                <button onclick="testMenuFunction()">Test Menu Function</button>
                <button onclick="testTouchEvents()">Test Touch Events</button>
            </div>
            
            <div class="test-section">
                <h3>üîß Browser Features</h3>
                <div id="browser-features">
                    <!-- Will be populated by JavaScript -->
                </div>
                <button onclick="runFeatureTests()">Run Feature Tests</button>
                <button onclick="testViewport()">Test Viewport</button>
            </div>
            
            <div class="test-section">
                <h3>üìä Performance Test</h3>
                <div id="performance-results">
                    <p>Performance metrics will appear here...</p>
                </div>
                <button onclick="runPerformanceTest()">Test Performance</button>
                <button onclick="testAnimations()">Test Animations</button>
            </div>
            
            <div class="test-section">
                <h3>üéØ Quick Actions</h3>
                <button onclick="openMainSite()">Open Main Site</button>
                <button onclick="openMobileTest()">Mobile Test Page</button>
                <button onclick="simulateMobileView()">Simulate Mobile</button>
                <button onclick="clearConsole()">Clear Console</button>
            </div>
        </div>
        
        <div style="margin-top: 30px;">
            <h3>üìù Test Console</h3>
            <div class="console-log" id="console-log">
                [READY] Browser compatibility test dashboard loaded...<br>
            </div>
        </div>
    </div>
    
    <script>
        let consoleOutput = document.getElementById('console-log');
        
        function log(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const colors = {
                info: '#00ff00',
                warning: '#ffaa00',
                error: '#ff0000',
                success: '#00ff88'
            };
            consoleOutput.innerHTML += `<span style="color: ${colors[type]}">[${timestamp}] ${message}</span><br>`;
            consoleOutput.scrollTop = consoleOutput.scrollHeight;
        }
        
        function detectBrowser() {
            const ua = navigator.userAgent;
            let browser = 'Unknown';
            let version = 'Unknown';
            
            if (ua.indexOf('Chrome') > -1) {
                browser = 'Chrome';
                version = ua.match(/Chrome\/([0-9.]+)/)[1];
            } else if (ua.indexOf('Safari') > -1) {
                browser = 'Safari';
                version = ua.match(/Version\/([0-9.]+)/)[1];
            } else if (ua.indexOf('Firefox') > -1) {
                browser = 'Firefox';
                version = ua.match(/Firefox\/([0-9.]+)/)[1];
            } else if (ua.indexOf('Edge') > -1) {
                browser = 'Edge';
                version = ua.match(/Edge\/([0-9.]+)/)[1];
            }
            
            return { browser, version, userAgent: ua };
        }
        
        function testMenuFunction() {
            log('Testing menu functionality...', 'info');
            
            // Try to load the main site in an iframe and test
            const testFrame = document.createElement('iframe');
            testFrame.style.display = 'none';
            testFrame.src = 'http://localhost:8001/index.html';
            document.body.appendChild(testFrame);
            
            testFrame.onload = () => {
                try {
                    const toggle = testFrame.contentDocument?.querySelector('.apple-menu-toggle');
                    const menu = testFrame.contentDocument?.querySelector('.apple-menu');
                    
                    if (toggle && menu) {
                        log('‚úÖ Menu elements found successfully', 'success');
                        document.getElementById('menu-elements-status').textContent = 'Supported';
                        document.getElementById('menu-elements').className = 'feature-test supported';
                    } else {
                        log('‚ùå Menu elements not found', 'error');
                        document.getElementById('menu-elements-status').textContent = 'Not Found';
                        document.getElementById('menu-elements').className = 'feature-test unsupported';
                    }
                } catch (error) {
                    log('‚ö†Ô∏è Cross-origin restrictions (normal for security)', 'warning');
                    document.getElementById('menu-elements-status').textContent = 'Security Restricted';
                    document.getElementById('menu-elements').className = 'feature-test supported';
                }
                
                document.body.removeChild(testFrame);
            };
            
            testFrame.onerror = () => {
                log('‚ùå Failed to load test page', 'error');
                document.body.removeChild(testFrame);
            };
        }
        
        function testTouchEvents() {
            log('Testing touch event support...', 'info');
            
            const touchSupport = 'ontouchstart' in window || navigator.maxTouchPoints > 0;
            
            if (touchSupport) {
                log('‚úÖ Touch events supported', 'success');
            } else {
                log('‚ÑπÔ∏è Touch events not supported (desktop browser)', 'info');
            }
            
            // Test pointer events
            const pointerSupport = 'onpointerdown' in window;
            if (pointerSupport) {
                log('‚úÖ Pointer events supported', 'success');
            }
        }
        
        function runFeatureTests() {
            log('Running comprehensive feature tests...', 'info');
            
            const features = {
                'CSS Grid': 'CSS.supports("display", "grid")',
                'CSS Flexbox': 'CSS.supports("display", "flex")',
                'CSS Backdrop Filter': 'CSS.supports("backdrop-filter", "blur(10px)")',
                'CSS Transforms': 'CSS.supports("transform", "translateY(-100%)")',
                'CSS Transitions': 'CSS.supports("transition", "all 0.3s ease")',
                'CSS Variables': 'CSS.supports("color", "var(--test)")',
                'Intersection Observer': '"IntersectionObserver" in window',
                'Request Animation Frame': '"requestAnimationFrame" in window',
                'Local Storage': '"localStorage" in window',
                'Session Storage': '"sessionStorage" in window'
            };
            
            const browserFeaturesDiv = document.getElementById('browser-features');
            browserFeaturesDiv.innerHTML = '';
            
            for (const [feature, test] of Object.entries(features)) {
                let supported = false;
                try {
                    supported = eval(test);
                } catch (error) {
                    supported = false;
                }
                
                const featureDiv = document.createElement('div');
                featureDiv.className = `feature-test ${supported ? 'supported' : 'unsupported'}`;
                featureDiv.innerHTML = `<strong>${feature}:</strong> <span class="${supported ? 'status-good' : 'status-bad'}">${supported ? 'Supported' : 'Not Supported'}</span>`;
                browserFeaturesDiv.appendChild(featureDiv);
                
                log(`${supported ? '‚úÖ' : '‚ùå'} ${feature}: ${supported ? 'Supported' : 'Not Supported'}`, supported ? 'success' : 'warning');
            }
        }
        
        function testViewport() {
            log('Testing viewport and responsive behavior...', 'info');
            
            const viewport = {
                width: window.innerWidth,
                height: window.innerHeight,
                devicePixelRatio: window.devicePixelRatio,
                orientation: screen.orientation?.type || 'unknown'
            };
            
            log(`üìê Viewport: ${viewport.width}x${viewport.height}`, 'info');
            log(`üîç Device Pixel Ratio: ${viewport.devicePixelRatio}`, 'info');
            log(`üì± Orientation: ${viewport.orientation}`, 'info');
            
            // Test responsive breakpoints
            if (viewport.width < 768) {
                log('üì± Mobile viewport detected', 'success');
            } else if (viewport.width < 1024) {
                log('üì± Tablet viewport detected', 'success');
            } else {
                log('üñ•Ô∏è Desktop viewport detected', 'success');
            }
        }
        
        function runPerformanceTest() {
            log('Running performance tests...', 'info');
            
            const start = performance.now();
            
            // Test CSS loading
            const stylesheet = document.createElement('link');
            stylesheet.rel = 'stylesheet';
            stylesheet.href = 'http://localhost:8001/assets/css/main.css';
            
            stylesheet.onload = () => {
                const cssLoadTime = performance.now() - start;
                log(`‚ö° CSS load time: ${cssLoadTime.toFixed(2)}ms`, 'success');
            };
            
            // Test JavaScript execution
            const jsStart = performance.now();
            for (let i = 0; i < 10000; i++) {
                Math.random();
            }
            const jsTime = performance.now() - jsStart;
            log(`üî• JavaScript execution test: ${jsTime.toFixed(2)}ms`, 'success');
            
            // Test memory usage if available
            if (performance.memory) {
                const memory = performance.memory;
                log(`üíæ Memory usage: ${(memory.usedJSHeapSize / 1024 / 1024).toFixed(2)} MB`, 'info');
            }
            
            document.getElementById('performance-results').innerHTML = `
                <p><strong>Performance Results:</strong></p>
                <ul>
                    <li>JS Execution: ${jsTime.toFixed(2)}ms</li>
                    <li>Memory: ${performance.memory ? (performance.memory.usedJSHeapSize / 1024 / 1024).toFixed(2) + ' MB' : 'Not available'}</li>
                    <li>Timestamp: ${new Date().toLocaleString()}</li>
                </ul>
            `;
        }
        
        function testAnimations() {
            log('Testing animation capabilities...', 'info');
            
            const testElement = document.createElement('div');
            testElement.style.cssText = `
                position: fixed;
                top: -100px;
                left: 50%;
                width: 50px;
                height: 50px;
                background: #007bff;
                border-radius: 50%;
                transform: translateX(-50%);
                transition: top 0.5s ease;
                z-index: 10000;
            `;
            
            document.body.appendChild(testElement);
            
            setTimeout(() => {
                testElement.style.top = '20px';
                log('üé¨ Animation test started', 'info');
                
                setTimeout(() => {
                    testElement.style.top = '-100px';
                    log('‚úÖ Animation test completed successfully', 'success');
                    
                    setTimeout(() => {
                        document.body.removeChild(testElement);
                    }, 500);
                }, 1000);
            }, 100);
        }
        
        function openMainSite() {
            window.open('http://localhost:8001/index.html', '_blank');
            log('üîó Opened main site in new tab', 'info');
        }
        
        function openMobileTest() {
            window.open('http://localhost:8001/mobile-test.html', '_blank');
            log('üì± Opened mobile test page', 'info');
        }
        
        function simulateMobileView() {
            log('üì≤ To simulate mobile view:', 'info');
            log('1. Press F12 to open developer tools', 'info');
            log('2. Click the device toolbar icon (mobile icon)', 'info');
            log('3. Select a mobile device from the dropdown', 'info');
            log('4. Refresh the page to test mobile behavior', 'info');
        }
        
        function clearConsole() {
            consoleOutput.innerHTML = '[CLEARED] Console cleared...<br>';
        }
        
        // Initialize on page load
        window.addEventListener('load', () => {
            log('üöÄ Browser compatibility test initialized', 'success');
            
            // Detect browser
            const browserInfo = detectBrowser();
            document.getElementById('browser-details').innerHTML = `
                <strong>Browser:</strong> ${browserInfo.browser} ${browserInfo.version}<br>
                <strong>Platform:</strong> ${navigator.platform}<br>
                <strong>Language:</strong> ${navigator.language}<br>
                <strong>Cookies Enabled:</strong> ${navigator.cookieEnabled ? 'Yes' : 'No'}<br>
                <strong>Online:</strong> ${navigator.onLine ? 'Yes' : 'No'}
            `;
            
            log(`üåê Browser: ${browserInfo.browser} ${browserInfo.version}`, 'info');
            log(`üíª Platform: ${navigator.platform}`, 'info');
            
            // Auto-run basic tests
            setTimeout(() => {
                testMenuFunction();
                runFeatureTests();
                testViewport();
            }, 1000);
        });
        
        // Test CSS support
        window.addEventListener('load', () => {
            const cssFeatures = [
                'backdrop-filter',
                'transform',
                'transition',
                'flex',
                'grid'
            ];
            
            let supportedFeatures = 0;
            cssFeatures.forEach(feature => {
                if (CSS.supports(feature, 'initial')) {
                    supportedFeatures++;
                }
            });
            
            const supportPercentage = (supportedFeatures / cssFeatures.length) * 100;
            document.getElementById('css-support-status').textContent = `${supportedFeatures}/${cssFeatures.length} (${supportPercentage.toFixed(0)}%)`;
            document.getElementById('css-support').className = `feature-test ${supportPercentage > 80 ? 'supported' : 'unsupported'}`;
            
            log(`üìä CSS feature support: ${supportPercentage.toFixed(0)}%`, supportPercentage > 80 ? 'success' : 'warning');
        });
        
        // Test JavaScript events
        window.addEventListener('load', () => {
            const events = ['click', 'touchstart', 'keydown', 'resize'];
            let workingEvents = 0;
            
            events.forEach(eventType => {
                try {
                    const testEl = document.createElement('div');
                    testEl.addEventListener(eventType, () => {});
                    workingEvents++;
                } catch (error) {
                    log(`‚ö†Ô∏è Event ${eventType} not supported`, 'warning');
                }
            });
            
            document.getElementById('js-support-status').textContent = `${workingEvents}/${events.length} events`;
            document.getElementById('js-support').className = `feature-test ${workingEvents === events.length ? 'supported' : 'unsupported'}`;
        });
    </script>
</body>
</html>